# Vault Contract

### Deposit flow

![Deposit diagram](https://www.websequencediagrams.com/cgi-bin/cdraw?lz=dGl0bGUgVmF1bHQ6IERlcG9zaXQKCmFjdG9yIFVzZXIKcGFydGljaXBhbnQgUmVnaXN0cnkgU0MACw0AOgUABRBUb2tlbiBTQwBGB1JlY2lwaWVudAoKVXNlci0-AEILOiBsYXRlc3QAgQIFKAAxCCBhZGRyZXNzKQAqCABKCDogYXBwcm92ZSgAcQgAIwgsIGFtb3VudCkKCm5vdGUgb3ZlcgCBFAoAgVgHIHNoYXJlcyBhcmUgaXNzdWVkIHJlbGF0aXZlCnRvIHRvdGFsIGFjdGF1bCBiYWxhbmNlIGFuZCB0aGUKImluIGRlYnQiABEJcHJvdmlkZWQgdG8gdGhlIHN0cmF0ZWdpZXMKZW5kIG5vdGUAgWoIAIIfCDogZACCYwYoAIEoBiwAghMKAIFpC2FsdCBpZiB2AIJXBWlzIG5vdCBpbiAiZW1lcmdlbmN5IHNodXRkb3duIiBtb2RlCiAgIABqBQCBaA46ABMFeVsAgwoFXSByZXByZXNlbnRpbmcAggEIaXMgbWludGVkAD4FAIEtCSAgIACDUQkAgTEMAIIvBVMAgj8FRm9yQQCCbAUoAIExEQCDAQogICAgAD4PAINACnNhZmVUcmFuc2ZlckZyb20oVXNlcgCDRQoAg0ca&s=rose)

### Withdrawal flow

![Withdrawal diagram](https://www.websequencediagrams.com/cgi-bin/cdraw?lz=dGl0bGUgVmF1bHQ6IFdpdGhkcmF3CgphbHQABQkgZnVuZHMKClN0cmF0ZWd5IFNDLT4ALQUgU0M6IHcALgcobWF4U2hhcmVzLCByZWNpcGllbnQsIG1heExvc3MpCmxvb3AAJAlhbCBxdWV1ZQogIAB3BiBTQy0ASgwAZQgKZW5kCm5vdGUgb3ZlcgAjCTogYXNzZXJ0IHRvdGFsTG9zcyA8PQBkCCAqICh2YWx1ZSArABYKKSAvIE1BWF9CUFMKAGkJAIE8C0J1cm4gcwCBOwUAFQtUb2tlbgCBYgVzYWZlVHJhbnNmZXIoAIFVCwBkBSkKYWN0b3IgUmVjZWl2ZXIKADAILS0-AAwIOiAANwgKZWxzZQoAJAgAOoISAIIeH25kCgCEBwsAgmoJVmlldyB0aGUgbWF4aW11bSBxdWFudGl0eSBvZgCDUgcgCnRoaXMAhGoHY2FuIGZhY2lsaXRhdGUgZm9yIGEAhRULCmVuZCBub3QAgxMWbWF4QXZhaWxhYmxlAIVvBigpAHgecHJpYwBeCHNpbmcAhm4IAIRuBgBQHgA3BVBlcgCGWgUoKQo&s=rose)

### Emergency Shutdown

![Emergency diagram](https://www.websequencediagrams.com/cgi-bin/cdraw?lz=dGl0bGUgVmF1bHQ6IEVtZXJnZW5jeSBTaHV0ZG93bgoKYWN0b3IgVXNlcgoKYWx0IEdvdmVybmFuY2UgYWN0aXZhdGUAJBQAHAtNdWx0aXNpZyBTQy0-AGUFIFNDOiBzZXQAZwkAZwgodHJ1ZSkKbm90ZSBvdmVyAIETBgAqBXRoAIEgByBnb2VzIGludG8AgRwUAFgILS0-AG0WAIFbCwBnD2Vsc2UgR3VhcmRpYW4AgVQJcwCCAhQAgg8GACQICgAtCABxbgCBIwcAgTYbbmQKAII4FApEdXJpbmcAg1wTOgoxLiBObwCDagVzIG1heSBkZXBvc2l0AIJqBgCCegooYnV0ABsFd2l0aGRyYXcgYXMgdXN1YWwuKQoyLgCEGgxtYXkgbm90IGFkZCBuZXcgU3RyYXRlZ2llcy4KMy4gRWFjaAAMCHkgbXVzdCBwYXkgYmFjayB0aGVpciBkZWJ0CiAgIGFzIHF1aWNrbHkgYXMgcmVhc29uYWJsZSB0byBtaW5pbWFsbHkgYWZmZWN0ADQHAIE3BWlvbi4KNC4gT25seQCBCRB1bmQAhDMULgplbmQgbm90ZQoKVXNlcgCFLAwAgWoIKG1heFNoYXJlcywgcmVjaXBpZW50LCBtYXhMb3NzKQCCZBYAgXMKdCwAhkALLACEbQtuZACFbwdNYW5hZ2VtZW50CmFyZSBhdXRob3JpemVkIHRvIGUAgXUGZQCHKQlleGl0IG9uAIJCCQCBNwsAhz0GAHALAIc5EQA5FQCHKxkAgyUJAIc3EEV4aXQoKQCBXQh5AIdiD3Jldm9rZQCDYwgAGQ8AhwwjRXhpdEUAg20FZACHHQ8AggcGcwCBLxEAhw4JAFtXAIZwEgCBExEAg2YLAIEPGACECQsAggRYAIRsCwCCORhuZACLZAhLZWVwZXIgQm90CgpvcHQAjAsLcwCMDwcAi3QGZQCLHQsAKgosAIdDClNDOiAKSWYAizYFAIdZCWlzIGluAIUtCwBMCCwgCmhhcnZlc3QoKSB3aWxsAIVMBgAwDCdzAIdGCwCHGAkAgSUKAIULDwBGCQCFAw4AhTENbGlxdWlkYXRlQWxsUACIJgdzKACKNAdvcACNYg1kZQCNVRwgICAAjhAMAI1JLGZhbHNlKQA9BQCNVyMAihUFAI16BU5vcm1hbCBPcGVyYXRpbwB-BgCNTDUAewcAjCwF&s=rose)

### Strategy registration and migration
![Strategy adding diagram](https://www.websequencediagrams.com/cgi-bin/cdraw?lz=dGl0bGUgVmF1bHQ6IEFkZGluZyBzdHJhdGVneQoKcGFydGljaXBhbnQgR292ZXJuYW5jZSBNdWx0aXNpZyBTQwAWDQBCBQAFEFMARwcgU0MKCmFsdCBSZWdpc3RlcmluZyBhIG5ldwBnCiAgIABRFy0-AFUIOiBhZGQATQgoAIEkCCwgLi4uKQA8BW9wdCBJZgCBBgdpcyBpbiBlbWVyZ2VuY3kgc2h1dGRvd24ARCdzZXRFADQIUwA0ByhmYWxzZQBmBmVuZABiEmRlYnQgcmF0aW8gaXMgZmlsbGUAIAYAgTkidXBkYXRlAIIrCERlYnRSYXRpbygAWRVtaW5EZWJ0UGVySGFydmVzdCA8PSBtYXgABw4ARTVNADYQAHMPbm90ZSBsZWZ0IG8AgmIIU0MAgzoFAIJxCW1heGltdW0gbnVtYmVyIG9mAIRQCGllcyBub3QgcmVhY2gAghMHZW5kAE8FAIN9BQCEAgUAhEQIAINtDACEQwhBZGRlZCgAhE4LIGFkZHJlc3MAg3sGACcUX29yZ2FuaXplV2l0aGRyYXdhbFF1ZXVlKCkKZWxzZSBNaWdyYXQAhQ4FbiBvbGQgb25lIHRvAIUbBmVyIHZlcnNpbwCEDyhtAEkFAIM_CShvbGRWADsGLCBuZXcABQcAgRMbcmV2b2sALBQAgVIQAIZTCwBuCSgAUxAKb3B0IFJlbW92ZQCHVAkgZnJvbSB3AIIHByBxdWV1ZQoAhloicgBBBQCHTAhGcm9tAIJABw&s=rose)

# Registry contract

### Vault creation and registration flow

![Vault creation diagram](https://www.websequencediagrams.com/cgi-bin/cdraw?lz=dGl0bGUgUmVnaXN0cnk6IFZhdWx0IGNyZWF0aW9uCgpwYXJ0aWNpcGFudCBHb3Zlcm5hbmNlIE11bHRpc2lnIFNDABYNAEEIAAgQAFEGAB4PVG9rZW4gU0MKYWN0b3IgQmFua3N5CgphbHQgSWYgcHJvZHVjdGlvbiB2YXVsdAogICAgABUHAAwFIGRvZXNuJ3QgZXhpcwAZBiAgIACBDxctPgCBEAs6IG5ldwCBZQUoAHwIIGFkZHJlc3MsIGd1YXJkaWFuLCByZXdhcmRzLCBuYW1lLCBzeW1ib2wsIHJlbGVhc2VEZWx0YSkAbgkAgW8LAF0PX25ld1Byb3h5AGwGLi4uAB8XAIIdCDogaW5pdGlhbGl6ZQAlCmVsc2UAgXIKAIFvBXMsIHRoZW4gZW5kb3JzZSBpAIFXLwAxBwCCBAYAgmAFAIFKFGVuZACCdwUAgUcbcgCEOwVlcgCCPBgAgzwFKQoAgTsIZXhwZXJpbWVudGFsAINSCwCDEihFADQLAIJ7SwCDFC5lbmQKCm9wdCBUYWcAhRMOAIRcLnRhZwCCcw10YWcAg2YKAIVMCQCGFgYAEiluZAplbmQ&s=rose)
